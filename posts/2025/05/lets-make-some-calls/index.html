<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Vlad Flore ">
<meta name="description" content="Introduction One of the most important things in programming is making HTTP calls to talk with some API. Java has very good support for this, and in this post, we will see how to call some HTTP endpoints using Java&rsquo;s HttpClient class. This class is part of the Java 11 standard library, so you don&rsquo;t need any external dependencies to use it.
A closer look at the HTTP client Besides the HttpClient class, there are a few other classes that we will use in this post:
" />
<meta name="keywords" content=", java, nerdy" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://vladflore.tech/posts/2025/05/lets-make-some-calls/" />


    <title>
        
            Let&#39;s make some calls :: vlad·flore · tech 
        
    </title>





<link rel="stylesheet" href="/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css" integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE=">


    
        <link rel="stylesheet" type="text/css" href="/css/custom.css">
    


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="Let&#39;s make some calls">
  <meta itemprop="description" content="Introduction One of the most important things in programming is making HTTP calls to talk with some API. Java has very good support for this, and in this post, we will see how to call some HTTP endpoints using Java’s HttpClient class. This class is part of the Java 11 standard library, so you don’t need any external dependencies to use it.
A closer look at the HTTP client Besides the HttpClient class, there are a few other classes that we will use in this post:">
  <meta itemprop="datePublished" content="2025-05-03T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-05-03T00:00:00+00:00">
  <meta itemprop="wordCount" content="1066">
  <meta itemprop="image" content="https://vladflore.tech/">
  <meta itemprop="keywords" content="Java,Nerdy">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://vladflore.tech/">
  <meta name="twitter:title" content="Let&#39;s make some calls">
  <meta name="twitter:description" content="Introduction One of the most important things in programming is making HTTP calls to talk with some API. Java has very good support for this, and in this post, we will see how to call some HTTP endpoints using Java’s HttpClient class. This class is part of the Java 11 standard library, so you don’t need any external dependencies to use it.
A closer look at the HTTP client Besides the HttpClient class, there are a few other classes that we will use in this post:">



    <meta property="og:url" content="https://vladflore.tech/posts/2025/05/lets-make-some-calls/">
  <meta property="og:site_name" content="vlad·flore · tech">
  <meta property="og:title" content="Let&#39;s make some calls">
  <meta property="og:description" content="Introduction One of the most important things in programming is making HTTP calls to talk with some API. Java has very good support for this, and in this post, we will see how to call some HTTP endpoints using Java’s HttpClient class. This class is part of the Java 11 standard library, so you don’t need any external dependencies to use it.
A closer look at the HTTP client Besides the HttpClient class, there are a few other classes that we will use in this post:">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-03T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-05-03T00:00:00+00:00">
    <meta property="article:tag" content="Java">
    <meta property="article:tag" content="Nerdy">
    <meta property="og:image" content="https://vladflore.tech/">






    <meta property="article:published_time" content="2025-05-03 00:00:00 &#43;0000 UTC" />









    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-RE8EZYX8D9"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-RE8EZYX8D9');
        }
      </script>


    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text ">
                $ cd ~</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#a9a9b3;
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/posts/">Posts</a></li><li><a href="/portfolio/">Portfolio</a></li><li><a href="/about/">About</a></li><li><a href="/files/Vlad-Emil_Flore_-_Software_Engineer.pdf">CV</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        6 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://vladflore.tech/posts/2025/05/lets-make-some-calls/">Let&rsquo;s make some calls</a>
      </h1>

      

      
        <hr />
        <aside id="toc">
          <div class="toc-title">Table of Contents</div>
          <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#a-closer-look-at-the-http-client">A closer look at the HTTP client</a></li>
    <li><a href="#creating-an-http-client">Creating an HTTP client</a></li>
    <li><a href="#creating-an-http-request">Creating an HTTP request</a>
      <ul>
        <li><a href="#get-request">GET request</a></li>
        <li><a href="#post-request">POST request</a></li>
        <li><a href="#put-request">PUT request</a></li>
        <li><a href="#patch-request">PATCH request</a></li>
        <li><a href="#delete-request">DELETE request</a></li>
      </ul>
    </li>
    <li><a href="#making-asynchronous-calls">Making asynchronous calls</a></li>
    <li><a href="#specifying-other-options">Specifying other options</a>
      <ul>
        <li><a href="#authentication">Authentication</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
        </aside>
        <hr />

      

      <div class="post-content">
        <h2 id="introduction">Introduction</h2>
<p>One of the most important things in programming is making HTTP calls to talk with some API. Java has very good support for this, and in this post, we will see how to call some HTTP endpoints using Java&rsquo;s <code>HttpClient</code> class. This class is part of the <em>Java 11</em> standard library, so you don&rsquo;t need any external dependencies to use it.</p>
<h2 id="a-closer-look-at-the-http-client">A closer look at the HTTP client</h2>
<p>Besides the <code>HttpClient</code> class, there are a few other classes that we will use in this post:</p>
<ul>
<li><code>HttpRequest</code>: This class represents an HTTP request</li>
<li><code>HttpResponse</code>: This class represents an HTTP response</li>
<li><code>HttpRequest.BodyPublishers</code>: This class contains static methods to create request bodies</li>
<li><code>HttpResponse.BodyHandlers</code>: This class contains static methods to create response bodies</li>
</ul>
<p>The new HTTP APIs can be found in the <code>java.net.http</code> package.</p>
<p>It&rsquo;s important to note that the new HTTP client is intended to replace the legacy <code>HttpURLConnection</code> class, which is still part of Java but considered outdated. The modern <code>HttpClient</code> not only simplifies making HTTP requests, but also adds powerful features like asynchronous calls, native WebSocket support, and HTTP/2 compatibility—making it a more robust and developer-friendly option overall.</p>
<p>The endpoint we will be using for the following examples is the <a href="https://jsonplaceholder.typicode.com/" target="_blank">JSONPlaceholder</a> API, which is a free online REST API that you can use for testing and prototyping.</p>
<p>The steps are similar for all the requests we will be making:</p>
<ol>
<li>Create an <code>HttpClient</code> instance; can be reused for multiple requests</li>
<li>Create an <code>HttpRequest</code> instance</li>
<li>Send the request and get the response</li>
<li>Process the response, i.e. either return the raw body or parse it into a Java object</li>
</ol>
<h2 id="creating-an-http-client">Creating an HTTP client</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.http.HttpClient;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> (<span style="color:#66d9ef">var</span> client <span style="color:#f92672">=</span> HttpClient.<span style="color:#a6e22e">newHttpClient</span>()) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use the client to make requests</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (IOException <span style="color:#f92672">|</span> InterruptedException e) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since <code>HttpClient</code> implements <code>java.lang.AutoCloseable</code> we need to close the resource when we are done with it, the easiest way to do this is by wrapping the instantiation with a <code>try-with-resources</code> block.</p>
<h2 id="creating-an-http-request">Creating an HTTP request</h2>
<h3 id="get-request">GET request</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String GET_SINGLE_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts/1&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">uri</span>(<span style="color:#66d9ef">new</span> URI(GET_SINGLE_ENDPOINT))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">GET</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>HttpResponse<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> response <span style="color:#f92672">=</span> client.<span style="color:#a6e22e">send</span>(request, HttpResponse.<span style="color:#a6e22e">BodyHandlers</span>.<span style="color:#a6e22e">ofString</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>String responseBody <span style="color:#f92672">=</span> response.<span style="color:#a6e22e">body</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> responseStatusCode <span style="color:#f92672">=</span> response.<span style="color:#a6e22e">statusCode</span>();
</span></span></code></pre></div><p>To fetch all the posts, instead of a single post, we can do the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String GET_ALL_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>().<span style="color:#a6e22e">uri</span>(<span style="color:#66d9ef">new</span> URI(GET_ALL_ENDPOINT)).<span style="color:#a6e22e">GET</span>().<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>HttpResponse<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> response <span style="color:#f92672">=</span> client.<span style="color:#a6e22e">send</span>(request, HttpResponse.<span style="color:#a6e22e">BodyHandlers</span>.<span style="color:#a6e22e">ofString</span>());
</span></span><span style="display:flex;"><span>String responseBody <span style="color:#f92672">=</span> response.<span style="color:#a6e22e">body</span>();
</span></span></code></pre></div><p>If the raw response body is a JSON string, we can use a library like <a href="https://github.com/FasterXML/jackson" target="_blank">Jackson</a> or <a href="https://github.com/google/gson" target="_blank">Gson</a> to parse it into a Java object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> com.fasterxml.jackson.databind.ObjectMapper;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> objectMapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectMapper();
</span></span><span style="display:flex;"><span>Post<span style="color:#f92672">[]</span> posts <span style="color:#f92672">=</span> objectMapper.<span style="color:#a6e22e">readValue</span>(responseBody, Post<span style="color:#f92672">[]</span>.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> gson <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Gson();
</span></span><span style="display:flex;"><span>Post<span style="color:#f92672">[]</span> posts <span style="color:#f92672">=</span> gson.<span style="color:#a6e22e">fromJson</span>(responseBody, Post<span style="color:#f92672">[]</span>.<span style="color:#a6e22e">class</span>);
</span></span></code></pre></div><p>Make sure to add the Jackson or Gson dependency to your <code>pom.xml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>jackson-databind<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;version&gt;</span>2.17.2<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>com.google.code.gson<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>gson<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;version&gt;</span>2.13.1<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>For the following code examples, making the request and getting the raw body is the same.</p>
<h3 id="post-request">POST request</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String POST_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> body <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;title&#34;: &#34;foo&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;body&#34;: &#34;bar&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;userId&#34;: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">uri</span>(<span style="color:#66d9ef">new</span> URI(POST_ENDPOINT))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">POST</span>(HttpRequest.<span style="color:#a6e22e">BodyPublishers</span>.<span style="color:#a6e22e">ofString</span>(body))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">headers</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span></code></pre></div><p>For a POST with no body, simply use <code>HttpRequest.BodyPublishers.noBody()</code>.</p>
<h3 id="put-request">PUT request</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String PUT_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts/1&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> body <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;id&#34;:1,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;title&#34;: &#34;FOO&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;body&#34;: &#34;BAR&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;userId&#34;: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">uri</span>(URI.<span style="color:#a6e22e">create</span>(PUT_ENDPOINT))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">PUT</span>(HttpRequest.<span style="color:#a6e22e">BodyPublishers</span>.<span style="color:#a6e22e">ofString</span>(body))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">headers</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span></code></pre></div><h3 id="patch-request">PATCH request</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String PATCH_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts/1&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> body <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;title&#34; : &#34;dummy title&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">uri</span>(<span style="color:#66d9ef">new</span> URI(PATCH_ENDPOINT))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">method</span>(<span style="color:#e6db74">&#34;PATCH&#34;</span>, HttpRequest.<span style="color:#a6e22e">BodyPublishers</span>.<span style="color:#a6e22e">ofString</span>(body))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">headers</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span></code></pre></div><h3 id="delete-request">DELETE request</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String DELETE_ENDPOINT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://jsonplaceholder.typicode.com/posts/1&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> request <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">uri</span>(<span style="color:#66d9ef">new</span> URI(DELETE_ENDPOINT))
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">DELETE</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span></code></pre></div><h2 id="making-asynchronous-calls">Making asynchronous calls</h2>
<p>Making asynchronous calls is very similar to making synchronous calls. The only difference is that we need to use the <code>sendAsync</code> method instead of the <code>send</code> method, and deal with the <code>CompletableFuture</code> that is returned.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">makeAsyncRequest</span>(HttpClient client, HttpRequest request) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// send the request asynchronously</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> future <span style="color:#f92672">=</span> client.<span style="color:#a6e22e">sendAsync</span>(request, HttpResponse.<span style="color:#a6e22e">BodyHandlers</span>.<span style="color:#a6e22e">ofString</span>())
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// process the response</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">thenApply</span>(App::handleResponse)
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// consume the response, by printing the first 5 posts</span>
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">thenAccept</span>(posts <span style="color:#f92672">-&gt;</span> Arrays.<span style="color:#a6e22e">stream</span>(posts).<span style="color:#a6e22e">limit</span>(5).<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::println));
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// wait for the future to complete, before proceeding with the program</span>
</span></span><span style="display:flex;"><span>    future.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Post<span style="color:#f92672">[]</span> <span style="color:#a6e22e">handleResponse</span>(HttpResponse<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> response) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> statusCode <span style="color:#f92672">=</span> response.<span style="color:#a6e22e">statusCode</span>();
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;response.statusCode() = &#34;</span> <span style="color:#f92672">+</span> statusCode);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (statusCode <span style="color:#f92672">==</span> 200) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ObjectMapper().<span style="color:#a6e22e">readValue</span>(response.<span style="color:#a6e22e">body</span>(), Post<span style="color:#f92672">[]</span>.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (JsonProcessingException e) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> RuntimeException(e);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Unsuccessful response.&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Post<span style="color:#f92672">[]</span>{};
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="specifying-other-options">Specifying other options</h2>
<p>When building the <em>client</em>, we can specify various options, such as:</p>
<ul>
<li>the <em>proxy</em> to use: <code>.proxy(ProxySelector.getDefault())</code></li>
<li>the <em>redirect policy</em>: <code>.followRedirects(HttpClient.Redirect.ALWAYS)</code></li>
<li>the <em>authenticator</em>: <code>.authenticator(auth)</code></li>
<li>the <em>executor</em>: <code>.executor(Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()))</code></li>
</ul>
<p>When building the <em>request</em>, we can specify various options, such as:</p>
<ul>
<li>the <em>timeout</em>: <code>.timeout(Duration.ofSeconds(1))</code></li>
<li>the <em>headers</em>: <code>.header(&quot;Content-Type&quot;, &quot;application/json&quot;)</code></li>
<li>the <em>protocol version</em>: <code>.version(HttpClient.Version.HTTP_2)</code></li>
<li>the <em>body publishers</em>: <code>.POST(HttpRequest.BodyPublishers.ofString(body))</code></li>
</ul>
<p>There are a couple of other body publishers that we can use, such as:</p>
<ul>
<li><code>HttpRequest.BodyPublishers.ofFile()</code>: body content taken from the file</li>
<li><code>HttpRequest.BodyPublishers.ofInputStream()</code>: body content taken from an input stream</li>
<li><code>HttpRequest.BodyPublishers.ofByteArray()</code>: body content taken from the byte array</li>
</ul>
<p>When <em>sending the request</em> we can specify how the response body should be handled, such as:</p>
<ul>
<li><code>HttpResponse.BodyHandlers.ofString()</code>: returns the response body as a string</li>
<li><code>HttpResponse.BodyHandlers.ofByteArray()</code>: returns the response body as a byte array</li>
<li><code>HttpResponse.BodyHandlers.ofFile()</code>: returns the response body as a file</li>
<li><code>HttpResponse.BodyHandlers.ofInputStream()</code>: returns the response body as an input stream</li>
<li><code>HttpResponse.BodyHandlers.ofPublisher()</code>: returns the response body as a publisher</li>
<li><code>HttpResponse.BodyHandlers.ofLines()</code>: returns the response body as a stream of lines</li>
</ul>
<h3 id="authentication">Authentication</h3>
<p>When creating the client, we can specify an <code>Authenticator</code> to use for authentication. The <code>Authenticator</code> is a class that provides a way to authenticate requests. We can extend it, and override the <code>getPasswordAuthentication</code> method to provide the credentials.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.Authenticator;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.PasswordAuthentication;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAuthenticator</span> <span style="color:#66d9ef">extends</span> Authenticator {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> PasswordAuthentication <span style="color:#a6e22e">getPasswordAuthentication</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> PasswordAuthentication(
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;username&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;password&#34;</span>.<span style="color:#a6e22e">toCharArray</span>()
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Alternatively, we can set the <code>Authorization</code> header in the request, and use a basic authentication scheme or a bearer token.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// for the basic authentication scheme</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> auth <span style="color:#f92672">=</span> Base64.<span style="color:#a6e22e">getEncoder</span>().<span style="color:#a6e22e">encodeToString</span>(<span style="color:#e6db74">&#34;username:password&#34;</span>.<span style="color:#a6e22e">getBytes</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> getRequest <span style="color:#f92672">=</span> HttpRequest.<span style="color:#a6e22e">newBuilder</span>(<span style="color:#66d9ef">new</span> URI(<span style="color:#e6db74">&#34;&lt;endpoint&gt;&#34;</span>))
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// set a bearer token</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#34;Authorization&#34;</span>, <span style="color:#e6db74">&#34;Bearer &lt;token&gt;&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// or set a basic authentication scheme</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">header</span>(<span style="color:#e6db74">&#34;Authorization&#34;</span>, <span style="color:#e6db74">&#34;Basic &#34;</span> <span style="color:#f92672">+</span> auth)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">GET</span>()
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">build</span>();
</span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>In this post, we have seen how to make HTTP calls using Java&rsquo;s <code>HttpClient</code> class. We have seen how to create a client, create a request, and send the request. We have also seen how to make asynchronous calls and specify various options for the client and the request.</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://vladflore.tech/tags/java/">java</a></span>
        <span class="tag"><a href="https://vladflore.tech/tags/nerdy/">nerdy</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        1066 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2025-05-03 02:00
        

         
          
        
      </p>
    </div>
      <hr />
      <div class="sharing-buttons">
        

  
  
  <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?url=https%3a%2f%2fvladflore.tech%2fposts%2f2025%2f05%2flets-make-some-calls%2f" target="_blank" rel="noopener" aria-label="" title="Share on twitter">
    <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
      </div>
    </div>
  </a>
  
  
  
  
  
  <a class="resp-sharing-button__link" href="mailto:?subject=Let%27s%20make%20some%20calls&amp;body=https%3a%2f%2fvladflore.tech%2fposts%2f2025%2f05%2flets-make-some-calls%2f" target="_self" rel="noopener" aria-label="" title="Share via email">
    <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
      </div>
    </div>
  </a>
  
  
  
  
  
  <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fvladflore.tech%2fposts%2f2025%2f05%2flets-make-some-calls%2f&amp;title=Let%27s%20make%20some%20calls&amp;summary=Let%27s%20make%20some%20calls&amp;source=https%3a%2f%2fvladflore.tech%2fposts%2f2025%2f05%2flets-make-some-calls%2f" target="_blank" rel="noopener" aria-label="" title="Share on linkedin">
    <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
      </div>
    </div>
  </a>
  
  
  <a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2fvladflore.tech%2fposts%2f2025%2f05%2flets-make-some-calls%2f&amp;resubmit=true&amp;title=Let%27s%20make%20some%20calls" target="_blank" rel="noopener" aria-label="" title="Share on reddit">
    <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
      </div>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
      </div>

    
    <div class="pagination">
        

        <div class="pagination__buttons">
            

            
            <span class="button next">
                <a href="https://vladflore.tech/posts/2025/04/java-17-24/">
                    <span class="button__text">Java &gt; 17 &amp;&amp; &lt;= 24</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    
      
        <div id="comments">
          <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "vladflore-tech" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      
    

    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2025</span>
            <span><a href="https://vladflore.tech/">Vlad Flore</a></span>
            
            <span><a href="https://vladflore.tech/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://themes.gohugo.io/themes/hugo-theme-hello-friend-ng/">hello-friend-ng</a> theme</span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js" integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc&#43;cxaJzDdCYbAW0X1G&#43;DgZYvtKFXe6MBex8jUJ2JT25mQx&#43;YjACIng=="></script>




    </body>
</html>
